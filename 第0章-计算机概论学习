# 鸟哥的Linux私房菜

# 第0章 计算机概论

## 电脑硬件的五大单元

- **输入单元**
- **CPU**（控制单元、算术逻辑单元）
- **内存**
- **输出单元**

---

## 0.1.2 一切设计的起点：CPU 的架构

### 精简指令集（RISC）

> **Reduced Instruction Set Computer**
> 

> 
> 

> 指令集较为精简，每个指令的运行时间都很短，完成的操作也很简单，指令的执行性能较佳；但是若要做复杂的事情，就要由多个指令来完成。
> 

**代表产品：**

- 甲骨文（Oracle）公司的 **SPARC** 系列
- IBM 公司的 **Power Architecture**（包括 PowerPC）系列
- ARM 公司的 **ARM CPU** 系列

### x86 架构

由于 AMD、Intel、VIA 所开发出来的 x86 架构 CPU 被大量使用于个人电脑（Personal Computer），因此，个人电脑常被称为 **x86 架构电脑**。

<aside>
💡

为何称为 x86 架构？这是因为最早的那块 Intel 研发出来的 CPU 代号称为 **8086**，后来依此架构又开发出 80286、80386 等，因此这种架构的 CPU 就被称为 x86 架构了。

</aside>

### CPU 位数

所谓的**位（bit）**，指的是 CPU 一次读取数据的最大量：

- **64 位 CPU**：一次可以读写 64 位的数据
- **32 位 CPU**：一次能读取 32 位的数据

因为 CPU 读取数据量有限制，因此能够从内存中读写的数据也就有所限制。一般 **32 位的 CPU** 所能读写的最大数据量，大概就是 **4GB**。

---

## 0.1.3 其他单元的设备

| 单元类型 | 说明 |
| --- | --- |
| **系统单元** | 包括 CPU 与内存及相关的主板相关组件，主板上面还有很多的硬件接口与相关的适配卡 |
| **存储单元** | 包括内存和辅助存储（硬盘、软盘、磁带等） |
| **输入输出单元** | 键盘、鼠标、打印机、扬声器、投影仪等 |

---

## 0.1.5 电脑的分类

### 超级计算机

运算速度最快的电脑，但维护与使用成本高，主要应用于需要高速计算的项目中，如**国防军事、气象预测、太空科技**。

### 大型计算机

通常也具有高速的 CPU，功能上比不上超级计算机，但也可以用来处理大量的数据和复杂的计算。

### 迷你计算机

保有大型计算机同时支持多用户的特性，但主机可以放在一般工作环境中，不需要特殊的空调机房。通常作为**科学研究、工程分析与工厂的流程管理**。

### 工作站

价格比迷你电脑便宜许多，针对特殊用途而设计的电脑。在个人电脑的性能未达到目前的状况前，工作站的电脑性能/价格比是所有电脑中最佳的。

### 微电脑

个人电脑就属于微电脑，**价格最低，体积最小**。

---

## 0.1.6 电脑上面常用的计量单位

### 容量单位

| 单位 | 换算关系 |
| --- | --- |
| 1 B | = 8 b |
| 1 KB | = 1024 B |
| 1 MB | = 1024 KB |
| 1 GB | = 1024 MB |
| 1 TB | = 1024 GB |
| 1 PB | = 1024 TB |
| 1 EB | = 1024 PB |

### 速度单位

- **CPU 的命令**：通常使用 **MHz** 或 **GHz** 的单位，Hz 就是"次数每秒"的意思
- **网络传输**：以"位"为单位，常用单位为 **Mbit/s**（每秒多少 Mbit）

---

## 0.2 个人电脑架构与相关设备组件

### 主板

主板是连接各组件的重要部分，芯片组的设计优劣会影响性能。

**早期的芯片组架构：**

- **北桥**：负责连接速度较快的 CPU、内存与显卡等组件
- **南桥**：负责连接速度较慢的设备接口，包括硬盘、USB 设备、网卡等

<aside>
📌

北桥最重要的事情就是 CPU 与内存之间的桥接。在现在的主流架构中，大多数将北桥的内存控制器整合到了 CPU 中。

</aside>

---

## 0.2.1 执行脑袋运算与判断的 CPU

### CPU 针脚

不同的 CPU 型号大多有不同的针脚（CPU 上的插脚），能够适配的主板芯片组也不同，所以升级主板时，不能只考虑 CPU，还需要留意主板所支持的 CPU 型号。

> 示例：如 Intel Core i3/i5/i7 系列的 CPU 产品中，甚至先后期出厂的类似型号的针脚也不同。
> 

### CPU 的比较要素

1. **CPU 内部的指令集**
2. **CPU 的频率**（频率是 CPU 每秒可以进行的工作次数，频率越高越好）

### CPU 的工作频率

早期的 CPU 架构主要通过北桥来连接系统最重要的 CPU、内存与显卡。所有的设备都需要通过北桥来连接，所以每个设备的工作频率应该要相同。于是就有了所谓的**前端总线（FSB）**的产生。

但是因为 CPU 的命令周期比其他的设备都要快，又为了满足 FSB 的频率，厂商就在 CPU 内部再加速，于是就有了**外频与倍频**。

<aside>
⚡

**外频**：CPU 与外部组件进行数据传输的速度

**倍频**：CPU 内部用来加速工作性能的一个倍数

**CPU 频率 = 外频 × 倍频**

</aside>

外频一般不好变，一般为了加速，变动的是 CPU 的倍频。

### CPU 的位数与总线“位宽”

若内存能提供给 CPU 的数据量越大，整体的系统性能应该就比较快。若要知道内存提供的数据量，需要借由 CPU 的内存控制芯片与内存的传输速度"**前端总线速度（FSB）**"来说明。

与 CPU 的频率类似，内存也有工作频率，频率的限制来自于 CPU 的内存控制器所决定。一般来说，每个时钟周期能够传输的数据量，大多数为 **64 位**，这便是**位宽**。

<aside>
🔢

**计算示例**

若 CPU 的工作频率最高为 1600MHz，则 CPU 从内存中取得的最快带宽是：

`1600MHz × 64bit = 12.8GB/s`

</aside>

### CPU 等级

由于 x86 的 CPU 在 Intel 的 Pentium 系列后就有各异的针脚与设计，为了对不同的 CPU 规范等级，所以就有了 **i386、i586、i686** 的名词出现。

- 目前许多程序都有对 CPU 做优化的设计，故当前程序最好在 **x86-64** 下运行
- 以往的程序可以在当前的系统中运行，因为这些东西具有**向下兼容**的能力

### 超线程

超线程（Hyper-Threading Technology，简称 HT）是 Intel 开发的一种技术，它允许一个物理 CPU 核心同时执行多个线程，从而提高 CPU 的工作效率。

在传统的 CPU 架构中，一个物理核心在同一时间只能处理一个线程。而超线程技术通过在单个物理核心中模拟出两个逻辑核心，使得操作系统认为存在两个独立的处理器，从而可以同时处理两个线程。

**超线程的工作原理：**

- CPU 核心内部有许多执行单元（如算术逻辑单元、浮点运算单元等）
- 当一个线程在等待数据或执行某些操作时，这些执行单元可能处于闲置状态
- 超线程技术允许另一个线程使用这些闲置的执行单元，从而提高 CPU 的利用率

**超线程的优势：**

- 提高多任务处理能力，特别是在运行多个程序时
- 在某些应用场景下，性能提升可达 15-30%
- 不需要增加物理核心，成本相对较低

**超线程的局限：**

- 两个逻辑核心共享同一个物理核心的资源，性能提升有限
- 并非所有应用程序都能从超线程中受益
- 在某些特定场景下，超线程可能会导致性能下降

<aside>

示例：一个配备超线程技术的 4 核心 CPU，在操作系统中会显示为 8 个逻辑处理器。但这 8 个逻辑处理器的性能并不等同于真正的 8 个物理核心。

</aside>

---

## 0.2.2 内存

CPU 的数据都是源于内存，无论是软件还是文件数据，都必须要读入内存后 CPU 才能利用。个人电脑的内存主要组件为**动态随机存取内存（DRAM）**，随机读取内存只有在通电的时候才能记录与利用，断电后数据就消失了。

DRAM 根据技术的更新分为几代，而使用上较为广泛的有 **SDRAM** 与 **DDR SDRAM** 两种：

- 差别在针脚与工作电压的不同
- DDR 的双倍传输速度：它可以在一次工作周期内进行两次数据的传输，就好像是 CPU 的倍频
- 新一代的 PC 大多使用 DDR 内存

<aside>
💡

内存除了频率和带宽要考虑以外，**内存的容量也很重要**。所有的数据都要加载到内存中才可以被 CPU 读取，内存容量不大将会导致某些大容量数据无法被完整的加载。对服务器来说，有时内存的容量要比 CPU 的速度还重要。

</aside>

### 多通道设计

由于所有的数据必须要存放在内存，所以内存的数据位宽必须是越大越好。但是传统的总线位宽大约仅为 64 位，为了加大这个位宽，芯片厂商就将两个内存集合在一起：

- 如果一条内存达 64 位，两根内存就可以达到 **128 位**

除了内存以外，事实上个人电脑还有许多类似内存的存储结构存在，CPU 的**二级高速缓存（L2 Cache）**必须要和 CPU 的频率相同。

### 只读存储器（ROM）

CPU 与内存的频率可以调整，主板上面如果有内置的网卡或显卡时，会使用 ROM 来存储固件程序。

---

## 0.2.3 显卡

显卡上面会有集成内存被称为**显存**，显存容量会影响到屏幕的分辨率与颜色深度。

显卡主要是通过 **GPU** 的控制芯片与 CPU、内存来通信。所以数据的传输是越快越好，故我们可以看到显卡的主板插槽带宽越来越大。

---

## 0.2.4 硬盘与存储设备

电脑总是需要记录与读取数据的，而这些数据不可能由用户经过键盘来打字，一定需要存储设备。电脑系统的存储设备有：

- 硬盘
- 软盘
- MO
- CD / DVD
- U 盘

### 硬盘的物理组成

硬盘依据桌面版与移动版分为 **3.5 英寸**与 **2.5 英寸**的大小。实际的数据是写在具有磁性物质的碟片上的，而读写是通过在机械手臂的磁头来完成。

实际上运行时，主轴马达让碟片转动，然后机械手臂可伸展地让磁头在碟片上面进行读写的操作。此外，由于单一碟片的容量有限，故有的硬盘内部会有两个以上的碟片。

### 碟片上的数据

设计之初，在类似碟片同心圆的上面切出一个一个小区块：

- 这些小区块整合成一个圆形，让机械手臂的磁头去读写
- 这个小区块就是磁盘的最小物理存储单位，称为**扑区**
- 同一个同心圆的扑区组合成的圆就是所谓的**磁道**
- 由于磁盘里面可能会有多个碟片，故在所有碟片的同一磁道可以组合成所谓的**柱面**

数据的读写一般是从外往内进行读写。原本从磁盘的扑区都是设计成 **512B** 的大小，但是为了减少数据量的拆解，大部份高容量硬盘使用了 **4KB** 的扑区设计。

---

## 0.2.5 传输接口

### SATA 接口

SATA（Serial ATA）是目前个人电脑中最常见的硬盘传输接口，其传输速度依版本不同而有所差异。SATA 3.0 的理论传输速度可达 6Gb/s（约 600MB/s），相比早期的 PATA（Parallel ATA）接口有显著提升。SATA 接口的优点包括线材轻薄、安装方便、支持热插拔等特性。

### SAS 接口

SAS（Serial Attached SCSI）接口主要用于企业级服务器和高端工作站，是 SCSI（Small Computer System Interface）技术的演进版本。SAS 接口提供了比 SATA 更高的可靠性、性能和扩展性。

**SAS 接口的特点：**

- 传输速度更快：SAS 3.0 的理论传输速度可达 12Gb/s（约 1200MB/s），是 SATA 3.0 的两倍
- 全双工通信：SAS 支持同时读写操作,而 SATA 是半双工的
- 更高的可靠性：采用点对点连接，减少了信号干扰和数据传输错误
- 支持更多设备：单个 SAS 控制器可以连接更多的硬盘设备
- 向下兼容：SAS 控制器可以连接 SATA 硬盘，但 SATA 控制器不能连接 SAS 硬盘

**SAS 与 SATA 的比较：**

- 性能：SAS 硬盘通常具有更高的转速（10000 RPM 或 15000 RPM），而 SATA 硬盘多为 5400 RPM 或 7200 RPM
- 价格：SAS 硬盘和控制器的价格显著高于 SATA
- 应用场景：SAS 适用于需要高性能、高可靠性的企业环境，SATA 则更适合个人电脑和一般应用

### USB 接口

USB（Universal Serial Bus）是一种通用的外部接口标准，广泛应用于各种存储设备和外围设备的连接。USB 接口经历了多代技术演进，传输速度不断提升。

**USB 接口的发展历程:**

- USB 1.1:传输速度最高 12Mb/s,已基本淘汰
- USB 2.0:传输速度最高 480Mb/s(约 60MB/s),曾是最普及的标准
- USB 3.0/3.1 Gen 1:传输速度最高 5Gb/s(约 500MB/s),采用蓝色接口标识
- USB 3.1 Gen 2:传输速度最高 10Gb/s(约 1000MB/s)
- USB 3.2:传输速度最高 20Gb/s(约 2500MB/s)
- USB 4.0:传输速度最高 40Gb/s(约 5000MB/s),基于 Thunderbolt 3 协议

**USB 接口的特点:**

- 即插即用:支持热插拔,无需关机即可连接或移除设备
- 向下兼容:新版本的 USB 接口通常可以兼容旧版本的设备
- 供电功能:USB 接口可为外接设备供电,USB-C 甚至可以为笔记本电脑充电
- 应用广泛:除了存储设备,还可连接键盘、鼠标、打印机等各种外设
- 接口类型多样:包括 Type-A、Type-B、Type-C、Micro-USB、Mini-USB 等

<aside>

注意:USB 存储设备(如 U 盘、移动硬盘)的实际传输速度不仅取决于 USB 接口版本,还受到存储介质本身的读写速度限制。例如,即使使用 USB 3.0 接口,如果 U 盘内部采用的是低速闪存芯片,实际传输速度仍然会受到限制。

</aside>

---

## 0.3 数字系统

### 二进制

**十进制示例：**

`3456 = 3×10³ + 4×10² + 5×10¹ + 6×10⁰`

**二进制示例：**

`1101010 = 1×2⁶ + 1×2⁵ + 0×2⁴ + 1×2³ + 0×2² + 1×2¹ + 0×2⁰`

### 字符编码系统

既然电脑只记录 0 和 1，那么文字的记录也是 0 和 1。

纪录方式经过一个编码系统处理，然后又从内存区转为我们所含义接受的：

- **导入文件字符数据** → （编码对应表）→ **数字** → **文件**
- **文件** → （编码对应表）→ **字符**

常用的英文编码表为 **ASCII**，在这编码系统中，每字符占用 1 字节的记录，故有 2⁸ = 256 种变化。

由于非英文编码出现或缺少的问题，国际组织 ISO/IEC 制定了 **Unicode** 编码系统，常称为 **UTF-8** 即万国码。

---

## 0.4 软件程序运行

### 机器语言程序与编译型程序

- **机器语言程序**：要学习直接写给机器的语言，相对难
- **编译型程序**：使用编译器，将高级语言“转化”为机器语言

---

## 0.5 操作系统

操作系统本身也是一组程序，但其重点在于管理电脑的所有活动及驱动系统中所有的硬件。其功能的实现由系统的**内核**。

<aside>
⚠️

只有内核提供的功能，电脑系统才可运转，帮人们完成任务。内核程序放置于内存当中的区域是受保护的，且启动后就常驻于内存中。

</aside>

### 系统调用

操作系统通常会提供一套**应用程序接口（API）**给程序员开发程序软件，工程师只需遵循 API 即可轻松开发软件。

### 内核功能

系统调用包括：

- **进程管理**
- **内存管理**
- **文件系统管理**
- **设备驱动**
